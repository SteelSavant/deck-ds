{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Api",
  "description": "Marker type for generating API json schema types for ts",
  "type": "object",
  "required": [
    "autostart_request",
    "create_profile_request",
    "create_profile_response",
    "get_profile_request",
    "get_profile_response",
    "get_profiles_response",
    "get_templates_response",
    "reify_pipeline_request",
    "reify_pipeline_response",
    "set_profile_request"
  ],
  "properties": {
    "autostart_request": {
      "$ref": "#/definitions/AutoStartRequest"
    },
    "create_profile_request": {
      "$ref": "#/definitions/CreateProfileRequest"
    },
    "create_profile_response": {
      "$ref": "#/definitions/CreateProfileResponse"
    },
    "get_profile_request": {
      "$ref": "#/definitions/GetProfileRequest"
    },
    "get_profile_response": {
      "$ref": "#/definitions/GetProfileResponse"
    },
    "get_profiles_response": {
      "$ref": "#/definitions/GetProfilesResponse"
    },
    "get_templates_response": {
      "$ref": "#/definitions/GetTemplatesResponse"
    },
    "reify_pipeline_request": {
      "$ref": "#/definitions/ReifyPipelineRequest"
    },
    "reify_pipeline_response": {
      "$ref": "#/definitions/ReifyPipelineResponse"
    },
    "set_profile_request": {
      "$ref": "#/definitions/SetProfileRequest"
    }
  },
  "definitions": {
    "Action": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "DisplayConfig"
              ]
            },
            "value": {
              "$ref": "#/definitions/DisplayConfig"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "VirtualScreen"
              ]
            },
            "value": {
              "$ref": "#/definitions/VirtualScreen"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "MultiWindow"
              ]
            },
            "value": {
              "$ref": "#/definitions/MultiWindow"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "CitraLayout"
              ]
            },
            "value": {
              "$ref": "#/definitions/CitraLayout"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "CemuLayout"
              ]
            },
            "value": {
              "$ref": "#/definitions/CemuLayout"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "MelonDSLayout"
              ]
            },
            "value": {
              "$ref": "#/definitions/MelonDSLayout"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "SourceFile"
              ]
            },
            "value": {
              "$ref": "#/definitions/SourceFile"
            }
          }
        }
      ]
    },
    "AppImageSource": {
      "type": "string",
      "enum": [
        "Cemu"
      ]
    },
    "AspectRatioOption": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Any",
            "Native"
          ]
        },
        {
          "type": "object",
          "required": [
            "Exact"
          ],
          "properties": {
            "Exact": {
              "type": "number",
              "format": "float"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "AutoStartRequest": {
      "type": "object",
      "required": [
        "app",
        "pipeline",
        "target"
      ],
      "properties": {
        "app": {
          "type": "string"
        },
        "pipeline": {
          "$ref": "#/definitions/Pipeline"
        },
        "target": {
          "$ref": "#/definitions/PipelineTarget"
        }
      }
    },
    "CemuLayout": {
      "type": "object",
      "required": [
        "separate_gamepad_view"
      ],
      "properties": {
        "separate_gamepad_view": {
          "type": "boolean"
        }
      }
    },
    "CitraLayout": {
      "type": "object",
      "required": [
        "layout_option",
        "swap_screens"
      ],
      "properties": {
        "layout_option": {
          "$ref": "#/definitions/CitraLayoutOption"
        },
        "swap_screens": {
          "type": "boolean"
        }
      }
    },
    "CitraLayoutOption": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Default"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "SingleScreen"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "LargeScreen"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "SideBySide"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "SeparateWindows"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "HybridScreen"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Unknown"
              ]
            },
            "value": {
              "type": "integer",
              "format": "uint64",
              "minimum": 0.0
            }
          }
        }
      ]
    },
    "CreateProfileRequest": {
      "type": "object",
      "required": [
        "pipeline"
      ],
      "properties": {
        "pipeline": {
          "$ref": "#/definitions/PipelineDefinition"
        }
      }
    },
    "CreateProfileResponse": {
      "type": "object",
      "required": [
        "profile_id"
      ],
      "properties": {
        "profile_id": {
          "type": "string",
          "format": "uuid"
        }
      }
    },
    "DisplayConfig": {
      "type": "object",
      "required": [
        "teardown_deck_location",
        "teardown_external_settings"
      ],
      "properties": {
        "teardown_deck_location": {
          "$ref": "#/definitions/RelativeLocation"
        },
        "teardown_external_settings": {
          "$ref": "#/definitions/TeardownExternalSettings"
        }
      }
    },
    "EmuDeckSource": {
      "type": "string",
      "enum": [
        "CemuProton"
      ]
    },
    "FlatpakSource": {
      "type": "string",
      "enum": [
        "Cemu",
        "Citra",
        "MelonDS"
      ]
    },
    "GetProfileRequest": {
      "type": "object",
      "required": [
        "profile_id"
      ],
      "properties": {
        "profile_id": {
          "type": "string",
          "format": "uuid"
        }
      }
    },
    "GetProfileResponse": {
      "type": "object",
      "required": [
        "profile"
      ],
      "properties": {
        "profile": {
          "$ref": "#/definitions/Profile"
        }
      }
    },
    "GetProfilesResponse": {
      "type": "object",
      "required": [
        "profiles"
      ],
      "properties": {
        "profiles": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Profile"
          }
        }
      }
    },
    "GetTemplatesResponse": {
      "type": "object",
      "required": [
        "templates"
      ],
      "properties": {
        "templates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Template"
          }
        }
      }
    },
    "MelonDSLayout": {
      "type": "object",
      "required": [
        "book_mode",
        "layout_option",
        "sizing_option",
        "swap_screens"
      ],
      "properties": {
        "book_mode": {
          "type": "boolean"
        },
        "layout_option": {
          "$ref": "#/definitions/MelonDSLayoutOption"
        },
        "sizing_option": {
          "$ref": "#/definitions/MelonDSSizingOption"
        },
        "swap_screens": {
          "type": "boolean"
        }
      }
    },
    "MelonDSLayoutOption": {
      "description": "melonDS layout options. Because of the \"unique\" way melonDS handles layouts, these options do not map 1:1.",
      "type": "string",
      "enum": [
        "Natural",
        "Vertical",
        "Horizontal",
        "Hybrid",
        "Single"
      ]
    },
    "MelonDSSizingOption": {
      "type": "string",
      "enum": [
        "Even",
        "EmphasizeTop",
        "EmphasizeBottom",
        "Auto"
      ]
    },
    "ModeOption_for_Resolution": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Exact"
          ],
          "properties": {
            "Exact": {
              "$ref": "#/definitions/Resolution"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "AtLeast"
          ],
          "properties": {
            "AtLeast": {
              "$ref": "#/definitions/Resolution"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "AtMost"
          ],
          "properties": {
            "AtMost": {
              "$ref": "#/definitions/Resolution"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "ModeOption_for_double": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Exact"
          ],
          "properties": {
            "Exact": {
              "type": "number",
              "format": "double"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "AtLeast"
          ],
          "properties": {
            "AtLeast": {
              "type": "number",
              "format": "double"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "AtMost"
          ],
          "properties": {
            "AtMost": {
              "type": "number",
              "format": "double"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "ModePreference": {
      "type": "object",
      "required": [
        "aspect_ratio",
        "refresh",
        "resolution"
      ],
      "properties": {
        "aspect_ratio": {
          "$ref": "#/definitions/AspectRatioOption"
        },
        "refresh": {
          "$ref": "#/definitions/ModeOption_for_double"
        },
        "resolution": {
          "$ref": "#/definitions/ModeOption_for_Resolution"
        }
      }
    },
    "MultiWindow": {
      "type": "null"
    },
    "Pipeline": {
      "type": "object",
      "required": [
        "description",
        "name",
        "tags",
        "targets"
      ],
      "properties": {
        "description": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "targets": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/Selection_for_PipelineAction"
          }
        }
      }
    },
    "PipelineAction": {
      "type": "object",
      "required": [
        "id",
        "name",
        "selection"
      ],
      "properties": {
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "enabled": {
          "description": "Flags whether the selection is enabled. If None, not optional. If Some(true), optional and enabled, else disabled.",
          "type": [
            "boolean",
            "null"
          ]
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "profile_override": {
          "description": "Flags whether the selection is overridden by the setting from a different profile.",
          "type": [
            "string",
            "null"
          ],
          "format": "uuid"
        },
        "selection": {
          "description": "The value of the pipeline action",
          "allOf": [
            {
              "$ref": "#/definitions/Selection_for_PipelineAction"
            }
          ]
        }
      }
    },
    "PipelineActionDefinition": {
      "type": "object",
      "required": [
        "id",
        "name",
        "selection"
      ],
      "properties": {
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "enabled": {
          "description": "Flags whether the selection is enabled. If None, not optional. If Some(true), optional and enabled, else disabled.",
          "type": [
            "boolean",
            "null"
          ]
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "profile_override": {
          "description": "Flags whether the selection is overridden by the setting from a different profile.",
          "type": [
            "string",
            "null"
          ],
          "format": "uuid"
        },
        "selection": {
          "description": "The value of the pipeline action",
          "allOf": [
            {
              "$ref": "#/definitions/Selection_for_String"
            }
          ]
        }
      }
    },
    "PipelineActionRegistrar": {
      "type": "object",
      "required": [
        "actions"
      ],
      "properties": {
        "actions": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/PipelineActionDefinition"
          }
        }
      }
    },
    "PipelineDefinition": {
      "type": "object",
      "required": [
        "actions",
        "description",
        "name",
        "tags",
        "targets"
      ],
      "properties": {
        "actions": {
          "$ref": "#/definitions/PipelineActionRegistrar"
        },
        "description": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "targets": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/Selection_for_String"
          }
        }
      }
    },
    "PipelineTarget": {
      "type": "string",
      "enum": [
        "Desktop",
        "Gamemode"
      ]
    },
    "Profile": {
      "type": "object",
      "required": [
        "id",
        "pipeline"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "pipeline": {
          "$ref": "#/definitions/PipelineDefinition"
        }
      }
    },
    "ReifyPipelineRequest": {
      "type": "object",
      "required": [
        "pipeline"
      ],
      "properties": {
        "pipeline": {
          "$ref": "#/definitions/PipelineDefinition"
        }
      }
    },
    "ReifyPipelineResponse": {
      "type": "object",
      "required": [
        "pipeline"
      ],
      "properties": {
        "pipeline": {
          "$ref": "#/definitions/Pipeline"
        }
      }
    },
    "RelativeLocation": {
      "type": "string",
      "enum": [
        "Above",
        "Below",
        "LeftOf",
        "RightOf",
        "SameAs"
      ]
    },
    "Resolution": {
      "type": "object",
      "required": [
        "h",
        "w"
      ],
      "properties": {
        "h": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        },
        "w": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "Selection_for_PipelineAction": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Action"
              ]
            },
            "value": {
              "$ref": "#/definitions/Action"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "OneOf"
              ]
            },
            "value": {
              "type": "object",
              "required": [
                "actions",
                "selection"
              ],
              "properties": {
                "actions": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/PipelineAction"
                  }
                },
                "selection": {
                  "type": "string"
                }
              }
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "AllOf"
              ]
            },
            "value": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/PipelineAction"
              }
            }
          }
        }
      ]
    },
    "Selection_for_String": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Action"
              ]
            },
            "value": {
              "$ref": "#/definitions/Action"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "OneOf"
              ]
            },
            "value": {
              "type": "object",
              "required": [
                "actions",
                "selection"
              ],
              "properties": {
                "actions": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "selection": {
                  "type": "string"
                }
              }
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "AllOf"
              ]
            },
            "value": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      ]
    },
    "SetProfileRequest": {
      "type": "object",
      "required": [
        "profile"
      ],
      "properties": {
        "profile": {
          "$ref": "#/definitions/Profile"
        }
      }
    },
    "SourceFile": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Flatpak"
          ],
          "properties": {
            "Flatpak": {
              "$ref": "#/definitions/FlatpakSource"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "AppImage"
          ],
          "properties": {
            "AppImage": {
              "$ref": "#/definitions/AppImageSource"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "EmuDeck"
          ],
          "properties": {
            "EmuDeck": {
              "$ref": "#/definitions/EmuDeckSource"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Custom"
          ],
          "properties": {
            "Custom": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "TeardownExternalSettings": {
      "oneOf": [
        {
          "description": "Previous resolution, before setup",
          "type": "string",
          "enum": [
            "Previous"
          ]
        },
        {
          "description": "Native resolution",
          "type": "string",
          "enum": [
            "Native"
          ]
        },
        {
          "description": "Resolution based on specific settings",
          "type": "object",
          "required": [
            "Preference"
          ],
          "properties": {
            "Preference": {
              "$ref": "#/definitions/ModePreference"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "Template": {
      "type": "object",
      "required": [
        "id",
        "pipeline"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "pipeline": {
          "$ref": "#/definitions/PipelineDefinition"
        }
      }
    },
    "VirtualScreen": {
      "type": "null"
    }
  }
}